-----> Starting Kitchen (v1.17.0)
-----> Creating <default-sbeliakou-centos-74-x86-64-minimal>...
       Bringing machine 'default' up with 'virtualbox' provider...
       ==> default: Importing base box 'sbeliakou/centos-7.4-x86_64-minimal'...
       [KProgress: 10%[KProgress: 30%[KProgress: 50%[KProgress: 70%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
       ==> default: Checking if box 'sbeliakou/centos-7.4-x86_64-minimal' is up to date...
       ==> default: Setting the name of the VM: default-sbeliakou-centos-74-x86-64-minimal_default_1525810246188_47869
       ==> default: Clearing any previously set network interfaces...
       ==> default: Preparing network interfaces based on configuration...
           default: Adapter 1: nat
           default: Adapter 2: hostonly
       ==> default: Forwarding ports...
           default: 22 (guest) => 2222 (host) (adapter 1)
       ==> default: Booting VM...
       ==> default: Waiting for machine to boot. This may take a few minutes...
           default: SSH address: 127.0.0.1:2222
           default: SSH username: vagrant
           default: SSH auth method: private key
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: Warning: Remote connection disconnect. Retrying...
           default: Warning: Connection reset. Retrying...
           default: 
           default: Vagrant insecure key detected. Vagrant will automatically replace
           default: this with a newly generated keypair for better security.
           default: 
           default: Inserting generated public key within guest...
           default: Removing insecure key from the guest if it's present...
           default: Key inserted! Disconnecting and reconnecting using new SSH key...
       ==> default: Machine booted and ready!
       ==> default: Checking for guest additions in VM...
           default: The guest additions on this VM do not match the installed version of
           default: VirtualBox! In most cases this is fine, but in rare cases it can
           default: prevent things such as shared folders from working properly. If you see
           default: shared folder errors, please make sure the guest additions within the
           default: virtual machine match the version of VirtualBox you have installed on
           default: your host and reload your VM.
           default: 
           default: Guest Additions Version: 5.2.6
           default: VirtualBox Version: 5.1
       ==> default: Setting hostname...
       ==> default: Configuring and enabling network interfaces...
           default: SSH address: 127.0.0.1:2222
           default: SSH username: vagrant
           default: SSH auth method: private key
       ==> default: Machine not provisioned because `--no-provision` is specified.
       [SSH] Established
       Vagrant instance <default-sbeliakou-centos-74-x86-64-minimal> created.
       Finished creating <default-sbeliakou-centos-74-x86-64-minimal> (1m24.33s).
-----> Converging <default-sbeliakou-centos-74-x86-64-minimal>...
       Preparing files for transfer
       Preparing dna.json
       Resolving cookbook dependencies with Berkshelf 6.3.1...
       Removing non-cookbook files before transfer
       Preparing solo.rb
-----> Installing Chef Omnibus (install only if missing)
       Downloading https://omnitruck.chef.io/install.sh to file /tmp/install.sh
       Trying wget...
       Download complete.
       el 7 x86_64
       Getting information for chef stable  for el...
       downloading https://omnitruck.chef.io/stable/chef/metadata?v=&p=el&pv=7&m=x86_64
         to file /tmp/install.sh.3153/metadata.txt
       trying wget...
       sha1	87d25f64b0bc0a190715bbcc13d2971d0a4b5486
       sha256	72bc0973509a73f7d0a6ca9015484b69afef6adf094634598cb341e82d9014d0
       url	https://packages.chef.io/files/stable/chef/14.1.1/el/7/chef-14.1.1-1.el7.x86_64.rpm
       version	14.1.1
       downloaded metadata file looks valid...
       downloading https://packages.chef.io/files/stable/chef/14.1.1/el/7/chef-14.1.1-1.el7.x86_64.rpm
         to file /tmp/install.sh.3153/chef-14.1.1-1.el7.x86_64.rpm
       trying wget...
       Comparing checksum with sha256sum...
       
       WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING
       
       You are installing an omnibus package without a version pin.  If you are installing
       on production servers via an automated process this is DANGEROUS and you will
       be upgraded without warning on new releases, even to new major releases.
       Letting the version float is only appropriate in desktop, test, development or
       CI/CD environments.
       
       WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING
       
       Installing chef 
       installing with rpm...
       warning: /tmp/install.sh.3153/chef-14.1.1-1.el7.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
       Preparing...                                                            (100%)#                                 (100%)##                                (100%)###                               (100%)####                              (100%)#####                             (100%)######                            (100%)#######                           (100%)########                          (100%)#########                         (100%)##########                        (100%)###########                       (100%)############                      (100%)#############                     (100%)##############                    (100%)###############                   (100%)################                  (100%)#################                 (100%)##################                (100%)###################               (100%)####################              (100%)#####################             (100%)######################            (100%)#######################           (100%)########################          (100%)#########################         (100%)##########################        (100%)###########################       (100%)############################      (100%)#############################     (100%)##############################    (100%)###############################   (100%)################################  (100%)################################# (100%)################################# [100%]
       Updating / installing...
          1:chef-14.1.1-1.el7                                                  (  2%)#                                 (  4%)##                                (  7%)###                               ( 10%)####                              ( 13%)#####                             ( 16%)######                            ( 19%)#######                           ( 22%)########                          ( 25%)#########                         ( 28%)##########                        ( 31%)###########                       ( 34%)############                      ( 37%)#############                     ( 40%)##############                    ( 43%)###############                   ( 46%)################                  ( 49%)#################                 ( 51%)##################                ( 54%)###################               ( 57%)####################              ( 60%)#####################             ( 63%)######################            ( 66%)#######################           ( 69%)########################          ( 72%)#########################         ( 75%)##########################        ( 78%)###########################       ( 81%)############################      ( 84%)#############################     ( 87%)##############################    ( 90%)###############################   ( 93%)################################  ( 96%)################################# ( 99%)################################# [100%]
       Thank you for installing Chef!
       Transferring files to <default-sbeliakou-centos-74-x86-64-minimal>
       Starting Chef Client, version 14.1.1
       Creating a new client identity for default-sbeliakou-centos-74-x86-64-minimal using the validator key.
       resolving cookbooks for run list: ["jboss7::default"]
       Synchronizing Cookbooks:
         - jboss7 (1.0.0)
         - java (2.0.1)
         - windows (4.2.2)
         - homebrew (5.0.4)
       Installing Cookbook Gems:
       Compiling Cookbooks...
       Converging 13 resources
       Recipe: java::notify
         * log[jdk-version-changed] action nothing (skipped due to action :nothing)
       Recipe: java::openjdk
         * yum_package[java-1.6.0-openjdk, java-1.6.0-openjdk-devel] action install
           - install version 1:1.6.0.41-1.13.13.1.el7_3.x86_64 of package java-1.6.0-openjdk
           - install version 1:1.6.0.41-1.13.13.1.el7_3.x86_64 of package java-1.6.0-openjdk-devel
       Recipe: java::notify
         * log[jdk-version-changed] action write
         
       Recipe: java::openjdk
         * java_alternatives[set-java-alternatives] action set
           - Add alternative for appletviewer
           - Add alternative for apt
           - Add alternative for extcheck
           - Add alternative for idlj
           - Add alternative for jar
           - Add alternative for jarsigner
           - Add alternative for java
           - Add alternative for javac
           - Add alternative for javadoc
           - Add alternative for javah
           - Add alternative for javap
           - Add alternative for jconsole
           - Add alternative for jdb
           - Add alternative for jhat
           - Add alternative for jinfo
           - Add alternative for jmap
           - Add alternative for jps
           - Add alternative for jrunscript
           - Add alternative for jsadebugd
           - Add alternative for jstack
           - Add alternative for jstat
           - Add alternative for jstatd
           - Add alternative for keytool
           - Add alternative for native2ascii
           - Add alternative for orbd
           - Add alternative for pack200
           - Add alternative for policytool
           - Add alternative for rmic
           - Add alternative for rmid
           - Add alternative for rmiregistry
           - Add alternative for schemagen
           - Add alternative for serialver
           - Add alternative for servertool
           - Add alternative for tnameserv
           - Add alternative for unpack200
           - Add alternative for wsgen
           - Add alternative for wsimport
           - Add alternative for xjc
       Recipe: java::set_java_home
         * directory[/etc/profile.d] action create (up to date)
         * template[/etc/profile.d/jdk.sh] action create
           - create new file /etc/profile.d/jdk.sh
           - update content in file /etc/profile.d/jdk.sh from none to 778ff5
           --- /etc/profile.d/jdk.sh	2018-05-08 21:15:46.801973949 +0100
           +++ /etc/profile.d/.chef-jdk20180508-3272-15dulc1.sh	2018-05-08 21:15:46.801973949 +0100
           @@ -1 +1,2 @@
           +export JAVA_HOME=/usr/lib/jvm/java-1.6.0
           - change mode from '' to '0755'
       Recipe: jboss7::default
         * linux_user[web] action create
           - create user web
         * group[web] action create (up to date)
         * yum_package[unzip] action install
           - install version 0:6.0-16.el7.x86_64 of package unzip
         * remote_file[/opt/jboss.zip] action create_if_missing
            - Progress: 10%
            - Progress: 20%
            - Progress: 30%
            - Progress: 40%
            - Progress: 50%
            - Progress: 60%
            - Progress: 70%
            - Progress: 80%
            - Progress: 90%
            - Progress: 100%
           - create new file /opt/jboss.zip
           - update content in file /opt/jboss.zip from none to be93bc
           (file sizes exceed 10000000 bytes, diff output suppressed)
           - change owner from '' to 'web'
           - change group from '' to 'web'
         * bash[unzip] action run
           - execute "bash"  "/tmp/chef-script20180508-3272-1f4uexy"
         * systemd_unit[jboss.service] action create
         Recipe: <Dynamically Defined Resource>
           * file[/etc/systemd/system/jboss.service] action create
             - create new file /etc/systemd/system/jboss.service
             - update content in file /etc/systemd/system/jboss.service from none to b1afa5
             --- /etc/systemd/system/jboss.service	2018-05-08 21:16:04.033077690 +0100
             +++ /etc/systemd/system/.chef-jboss20180508-3272-1st8ai8.service	2018-05-08 21:16:02.965868723 +0100
             @@ -1 +1,18 @@
             +  [Unit]
             +  Description=Jboss Application Server
             +  After=network.target
             +
             +  [Service]
             +  Type=forking
             +
             +  User=web
             +  Group=web
             +  ExecStart=/bin/bash -c 'nohup /opt/jboss/bin/run.sh -b 192.168.77.77 &'
             +  ExecStop=/bin/bash -c 'bin/shutdown.sh -s 192.168.77.77 -u admin -p admin'
             +  TimeoutStartSec=300
             +  TimeoutStopSec=600
             +  SuccessExitStatus=143
             +
             +  [Install]
             +  WantedBy=multi-user.target
             - change mode from '' to '0644'
             - change owner from '' to 'root'
             - change group from '' to 'root'
           - creating unit: jboss.service
       Recipe: jboss7::default
         * systemd_unit[jboss.service] action enable
           - enabling unit: jboss.service
         * systemd_unit[jboss.service] action start
           - starting unit: jboss.service
         * remote_file[/opt/jboss/server/default/deploy/sample.war] action create_if_missing
            - Progress: 100%
           - create new file /opt/jboss/server/default/deploy/sample.war
           - update content in file /opt/jboss/server/default/deploy/sample.war from none to 89b33c
           (new content is binary, diff output suppressed)
           - change owner from '' to 'web'
           - change group from '' to 'web'
         * http_request[check] action get[2018-05-08T21:16:05+01:00] ERROR: Connection refused connecting to http://192.168.77.77:8080/sample, retry 1/5
       [2018-05-08T21:16:10+01:00] ERROR: Connection refused connecting to http://192.168.77.77:8080/sample, retry 2/5
       [2018-05-08T21:16:15+01:00] ERROR: Connection refused connecting to http://192.168.77.77:8080/sample, retry 3/5
       [2018-05-08T21:16:20+01:00] ERROR: Connection refused connecting to http://192.168.77.77:8080/sample, retry 4/5
       [2018-05-08T21:16:25+01:00] ERROR: Connection refused connecting to http://192.168.77.77:8080/sample, retry 5/5
       
           - http_request[check] GET to http://192.168.77.77:8080/sample
       
       Running handlers:
       Running handlers complete
       Chef Client finished, 14/17 resources updated in 04 minutes 17 seconds
       Finished converging <default-sbeliakou-centos-74-x86-64-minimal> (4m41.59s).
-----> Kitchen is finished. (6m6.46s)
